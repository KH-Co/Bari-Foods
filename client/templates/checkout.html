<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>BariFoods - Checkout</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <link rel="icon" href="/static/img/logo.png" type="image/png">
  <!-- Google Search / Android -->
  <link rel="icon" type="image/png" sizes="192x192" href="../static/img/logo.png">
  <!-- Smaller fallback -->
  <link rel="icon" type="image/png" sizes="32x32" href="../static/img/logo.png">
  <!-- Apple devices -->
  <link rel="apple-touch-icon" href="../static/img/logo.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../static/css/product.css" />
  <link rel="stylesheet" href="../static/css/checkout.css" />
  <meta name="theme-color" content="#0f1115">
  <meta name="description" content="Complete your order securely at BariFoods">
</head>

<body>
  <header class="navbar navbar--brand">
    <div class="logo-container">
      <a href="index.html" class="brand-link" aria-label="Home">
        <img class="logo" src="../static/img/bari.jpg" alt="BariFoods" />
        <h1>BARI FOODS</h1>
      </a>
    </div>
  </header>

  <main class="container">
    <div class="checkout-grid">
      <section class="panel" role="main">
        <div class="panel-head">
          <h2 class="page-title">Checkout</h2>
        </div>

        <!-- Delivery Info Section - NEW DESIGN -->
        <details class="block" open>
          <summary class="block-head" role="button" aria-expanded="true">
            <span class="block-title">Select a delivery address</span>
            <span aria-hidden="true">&gt;</span>
          </summary>
          <div class="block-body">
            <div class="address-count">Delivery addresses (<span id="addressCount">0</span>)</div>
            
            <div id="addressList" class="address-list" role="radiogroup" aria-label="Select delivery address">
              <!-- Addresses will be populated here -->
            </div>

            <button id="addNewAddressBtn" class="add-address-btn" type="button">
              <span style="margin-right: 8px;">+</span>Add a new delivery address
            </button>

            <button id="deliverBtn" class="primary deliver-btn" type="button" disabled>
              Deliver to this address
            </button>
          </div>
        </details>

        <!-- Payment Method Section -->
        <details class="block" open>
          <summary class="block-head" role="button" aria-expanded="true">
            <span class="block-title">Payment Method</span>
            <span aria-hidden="true">&gt;</span>
          </summary>
          <div class="block-body">
            <div class="pay-list" id="payList" role="radiogroup" aria-describedby="payment-title">
              <h4 id="payment-title" class="sr-only">Choose Payment Method</h4>

              <label class="radio-item">
                <input type="radio" name="pay" value="card" />
                <span>RazorPay (Cards, UPI, Wallets)</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="pay" value="cod" aria-describedby="cod-desc" />
                <span>Cash on Delivery</span>
              </label>
            </div>

            <div id="cardForm" class="row-2 hidden" aria-live="polite" role="region" aria-label="Card payment details">
              <label class="field">
                <span class="label">Card Number</span>
                <input id="cardNumber" type="text" inputmode="numeric" placeholder="1234 5678 9012 3456"
                  autocomplete="cc-number" />
              </label>
              <label class="field">
                <span class="label">Cardholder Name</span>
                <input id="cardName" type="text" placeholder="Full name as on card" autocomplete="cc-name" />
              </label>
              <label class="field">
                <span class="label">Expiry Date</span>
                <input id="cardExpiry" type="text" placeholder="MM/YY" autocomplete="cc-exp" />
              </label>
              <label class="field">
                <span class="label">CVV</span>
                <input id="cardCvv" type="password" inputmode="numeric" placeholder="123" autocomplete="cc-csc"
                  maxlength="4" />
              </label>
            </div>

            <div id="upiForm" class="field hidden" aria-live="polite" role="region" aria-label="UPI payment details">
              <label class="field">
                <span class="label">UPI ID</span>
                <input id="upiId" type="text" placeholder="yourname@paytm"
                  pattern="[a-zA-Z0-9.\-_]+@[a-zA-Z0-9.\-_]+" />
              </label>
            </div>
          </div>
        </details>

        <!-- Order Review Section -->
        <details class="block" open>
          <summary class="block-head" role="button" aria-expanded="true">
            <span class="block-title">Review Your Order</span>
            <span aria-hidden="true">&gt;</span>
          </summary>
          <div class="block-body">
            <ul id="reviewList" class="review-list"></ul>
          </div>
        </details>
      </section>

      <!-- Order Summary Sidebar -->
      <aside class="summary" role="complementary" aria-labelledby="summary-title">
        <div class="summary-card">
          <h3 id="summary-title">Order Summary</h3>

          <div class="row">
            <span>Items Subtotal</span>
            <strong id="sumItems">₹ 0.00</strong>
          </div>

          <div class="row">
            <span>Delivery Fee</span>
            <span id="sumDelivery">₹ 0.00</span>
          </div>

          <div class="row">
            <span>Service Fee</span>
            <span id="sumService">₹ 0.00</span>
          </div>

          <hr aria-hidden="true" />

          <div class="row grand">
            <span>Total Amount</span>
            <strong id="sumTotal">₹ 0.00</strong>
          </div>

          <button id="placeOrder" class="primary" type="button" aria-describedby="order-terms" disabled>
            Place Order
          </button>

          <p class="tiny" id="order-terms">
            Secure checkout &bull; By placing this order, you agree to our
            <a href="/terms" style="color: var(--gold); text-decoration: none;">Terms & Conditions</a>
          </p>

        </div>
      </aside>
    </div>
  </main>

  <footer class="footer-bottom">
    <div class="footer-bottom-content">
      <p>&copy; 2025 BariFoods | All Rights Reserved.</p>
    </div>
  </footer>

  <script type="module" src="../static/js/checkout.js"></script>
  <script src="../static/js/header.js" defer></script>
</body>

</html>